!function(m){"use strict";var p,l={settings:{iconActivate:'<i class="fa fa-toggle-on fa-flip-horizontal" aria-hidden="true"></i>',iconDeactivate:'<i class="fa fa-toggle-on" aria-hidden="true"></i>',iconInstall:'<i class="fa fa-cloud-download" aria-hidden="true"></i>',iconSpinner:'<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>',mediaFrame:!1},init:function(){p=this.settings,m(l.ready),l.initEntriesSingle(),l.initEntriesList(),l.initWelcome(),m(document).on("wpformsReady",l.initAddons),l.initSettings(),l.initTools(),l.initUpgrades()},ready:function(){m(".notice").show(),m("#screen-meta-links, #screen-meta").prependTo("#wpforms-header-temp").show(),l.initChoicesJS(),l.initCheckboxMultiselectColumns(),m(".wpforms-color-picker").each(function(){var e=m(this);e.minicolors({defaultValue:e.data("fallback-color")||""})}),m(".wpforms-file-upload").each(function(){var e=m(this).find("input[type=file]"),n=m(this).find("label"),o=n.html();e.on("change",function(e){var t="";this.files&&1<this.files.length?t=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(t=e.target.value.split("\\").pop()),t?n.find(".fld").html(t):n.html(o)}),e.on("focus",function(){e.addClass("has-focus")}).on("blur",function(){e.removeClass("has-focus")})}),jconfirm.defaults={closeIcon:!1,backgroundDismiss:!1,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",animateFromElement:!1,content:wpforms_admin.something_went_wrong},m(document).on("click",".wpforms-upgrade-modal",function(){m.alert({title:wpforms_admin.thanks_for_interest,content:wpforms_admin.upgrade_modal,icon:"fa fa-info-circle",type:"blue",boxWidth:"550px",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}),l.initLity(),l.initFlyoutMenu(),m(document).trigger("wpformsReady")},initChoicesJS:function(){m(".choicesjs-select").each(function(){var e=m(this),t=window.wpforms_admin_choicesjs_config?{...window.wpforms_admin_choicesjs_config}:{};e.attr("multiple")&&(t.removeItemButton=void 0===t.removeItemButton||t.removeItemButton),"off"===e.data("sorting")&&(t.shouldSort=!1),e.data("search")&&(t.searchEnabled=!0),e.data("choices-position")&&(t.position=e.data("choices-position")),t.callbackOnInit=function(){var e=m(this.passedElement.element).data("size-class");e&&m(this.containerOuter.element).addClass(e),wpf.initMultipleSelectWithSearch(this)},e.data("choicesjs",new Choices(e[0],t))}),m(document).on("click",".choices",function(e){var t=m(this),n=t.find("select").data("choicesjs");n&&t.hasClass("is-open")&&(e.target.classList.contains("choices__inner")||e.target.classList.contains("choices__arrow"))&&n.hideDropdown()})},initCheckboxMultiselectColumns:function(){m(document).on("change",".checkbox-multiselect-columns input",function(){var e=m(this),t=e.parent(),n=e.closest(".checkbox-multiselect-columns"),t=t.text(),o="check-item-"+e.val(),i=n.find("#"+o);e.prop("checked")?(e.parent().addClass("checked"),i.length||n.find(".second-column ul").append('<li id="'+o+'">'+t+"</li>")):(e.parent().removeClass("checked"),n.find("#"+o).remove())}),m(document).on("click",".checkbox-multiselect-columns .all",function(e){e.preventDefault(),m(this).closest(".checkbox-multiselect-columns").find("input[type=checkbox]").prop("checked",!0).trigger("change"),m(this).remove()})},initFormOverview:function(){console.warn('WARNING! Function "WPFormsAdmin.initFormOverview()" has been deprecated, please use the new "WPFormsForms.Overview.init()" function instead!'),window.WPFormsForms.Overview.init()},initEntriesList:function(){m(document).on("click","#wpforms-entries-table-edit-columns",function(e){e.preventDefault(),l.entriesListFieldColumn()}),m(document).on("click","#wpforms-entries-list .form-selector .toggle",function(e){e.preventDefault(),m(this).toggleClass("active").next(".form-list").toggle()}),m(document).on("click","#wpforms-entries-table #doaction",function(e){var t=m(this).closest("form"),n=t.find("table"),o=t.find("select[name=action]"),n=n.find("input[name^=entry_id]:checked");"delete"===o.val()&&n.length&&(e.preventDefault(),m.confirm({title:wpforms_admin.heads_up,content:wpforms_admin.entry_delete_n_confirm.replace("{entry_count}",n.length),icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){t.trigger("submit")}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}}))}),m(document).on("click","#wpforms-entries-list .wp-list-table .delete",function(e){e.preventDefault();var t=m(this).attr("href");m.confirm({title:wpforms_admin.heads_up,content:wpforms_admin.entry_delete_confirm,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){window.location=t}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}})}),m(document).on("click","#wpforms-entries-list .wp-list-table .indicator-star",function(e){e.preventDefault();var e=m(this),t="",n=Number(m("#wpforms-entries-list .starred-num").text()),o=e.data("id"),i=e.data("form-id"),e=(e.hasClass("star")?(t="star",n++,e.attr("title",wpforms_admin.entry_unstar)):(t="unstar",n--,e.attr("title",wpforms_admin.entry_star)),e.toggleClass("star unstar"),m("#wpforms-entries-list .starred-num").text(n),{task:t,action:"wpforms_entry_list_star",nonce:wpforms_admin.nonce,entryId:o,formId:i});m.post(wpforms_admin.ajax_url,e)}),m(document).on("click","#wpforms-entries-list .wp-list-table .indicator-read",function(e){e.preventDefault();var e=m(this),t="",n=Number(m("#wpforms-entries-list .unread-num").text()),o=e.data("id"),n=(e.hasClass("read")?(t="read",n--,e.attr("title",wpforms_admin.entry_unread)):(t="unread",n++,e.attr("title",wpforms_admin.entry_read)),e.toggleClass("read unread"),m("#wpforms-entries-list .unread-num").text(n),{task:t,action:"wpforms_entry_list_read",nonce:wpforms_admin.nonce,entryId:o,formId:e.data("form-id")});m.post(wpforms_admin.ajax_url,n)}),m(document).on("click","#wpforms-entries-list .form-details-actions-deleteall",function(e){e.preventDefault();var t=m(this).attr("href"),e=m("#wpforms-entries-table"),n=e.data("filtered-count")?parseInt(e.data("filtered-count"),10):0,o={action:"wpforms_entry_list_process_delete_all",form_id:e.find('input[name="form_id"]').val(),date:e.find('input[name="date"]').val(),search:{field:e.find('select[name="search[field]"]').val(),comparison:e.find('select[name="search[comparison]"]').val(),term:e.find('input[name="search[term]"]').val()},nonce:wpforms_admin.nonce,url:t};m.confirm({title:wpforms_admin.heads_up,content:n&&m("#wpforms-reset-filter").length?wpforms_admin.entry_delete_n_confirm.replace("{entry_count}",n):wpforms_admin.entry_delete_all_confirm,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.get(wpforms_admin.ajax_url,o).done(function(e){e.success?window.location=_.isEmpty(e.data)?t:e.data:_.isEmpty(e.data)||console.error(e.data)})}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}})}),m(document).on("heartbeat-send",function(e,t){var n,o=m("#wpforms-entries-list");o.length&&!o.find(".wpforms-dash-widget").length&&void 0!==(n=o.find("#wpforms-entries-table").data("last-entry-id"))&&(t.wpforms_new_entries_entry_id=n,t.wpforms_new_entries_form_id=o.find("input[name=form_id]").val())}),m(document).on("heartbeat-tick",function(e,t){var n,o,i=m("#wpforms-entries-list");i.length&&t.wpforms_new_entries_notification&&(n=i.find(".wp-list-table thead tr").first().children().length,i.find(".new-entries-notification").length||i.find(".wp-list-table thead").append('<tr class="new-entries-notification"><td colspan="'+n+'"><a href=""></a></td></tr>'),(o=i.find(".new-entries-notification a")).text(t.wpforms_new_entries_notification).slideDown({start:function(){o.css("display","block")},always:function(){o.css("display","block")}}))})},initEntriesSingle:function(){"wpforms-entries"===l.getQueryString("page")&&"details"===l.getQueryString("view")&&l.entryHotkeys(),m(document).on("click","#wpforms-entries-single .submitdelete",function(e){e.preventDefault();var t=m(this).attr("href");m.confirm({title:wpforms_admin.heads_up,content:wpforms_admin.entry_delete_confirm,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){window.location=t}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}})}),m(document).on("click","#wpforms-entries-single .wpforms-entry-print a",function(e){e.preventDefault(),window.open(m(this).attr("href"))}),m(document).on("click","#wpforms-entries-single .wpforms-empty-field-toggle",function(e){e.preventDefault(),"true"===wpCookies.get("wpforms_entry_hide_empty")?(wpCookies.remove("wpforms_entry_hide_empty"),m(this).text(wpforms_admin.entry_empty_fields_hide)):(wpCookies.set("wpforms_entry_hide_empty","true",2592e3),m(this).text(wpforms_admin.entry_empty_fields_show)),m(".wpforms-entry-field.empty, .wpforms-edit-entry-field.empty").toggle()}),m(document).on("click","#wpforms-entries-single .wpforms-entry-notes-new .add",function(e){e.preventDefault(),m(this).hide().next("form").stop().slideToggle()}),m(document).on("click","#wpforms-entries-single .wpforms-entry-notes-new .cancel",function(e){e.preventDefault(),m(this).closest("form").stop().slideToggle(),m(".wpforms-entry-notes-new .add").show()}),m(document).on("click","#wpforms-entries-single .wpforms-entry-notes-byline .note-delete",function(e){e.preventDefault();var t=m(this).attr("href");m.confirm({title:wpforms_admin.heads_up,content:wpforms_admin.entry_note_delete_confirm,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){window.location=t}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}})})},entryHotkeys:function(){m(document).on("keydown",function(e){74!==e.keyCode||l.isFormTypeNode(e.target.nodeName)?75!==e.keyCode||l.isFormTypeNode(e.target.nodeName)||"#"!==(e=m("#wpforms-entry-next-link").attr("href"))&&(window.location.href=e):"#"!==(e=m("#wpforms-entry-prev-link").attr("href"))&&(window.location.href=e)})},entriesListFieldColumn:function(){m.alert({title:wpforms_admin.entry_field_columns,boxWidth:"500px",content:p.iconSpinner+m("#wpforms-field-column-select").html(),onContentReady:function(){var e=this.$content,t=e.find("select"),n=new Choices(t[0],{shouldSort:!1,removeItemButton:!0,loadingText:wpforms_admin.choicesjs_loading,noResultsText:wpforms_admin.choicesjs_no_results,noChoicesText:wpforms_admin.choicesjs_no_choices,itemSelectText:wpforms_admin.choicesjs_item_select,fuseOptions:window.wpforms_admin_choicesjs_config.fuseOptions,callbackOnInit:function(){e.find(".fa").remove(),e.find("form").show()}});m(".jconfirm-content-pane, .jconfirm-box").css("overflow","visible"),n.passedElement.element.addEventListener("change",function(){n.hideDropdown(!0)},!1)},buttons:{confirm:{text:wpforms_admin.save_refresh,btnClass:"btn-confirm",keys:["enter"],action:function(){this.$content.find("form").trigger("submit")}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}})},initWelcome:function(){m(document).on("click","#wpforms-welcome .play-video",function(e){e.preventDefault();m.dialog({title:!1,content:'<div class="video-container"><iframe width="1280" height="720" src="https://www.youtube-nocookie.com/embed/o2nE1P74WxQ?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div>',closeIcon:!0,boxWidth:"70%"})})},initAddons:function(){var e;m("#wpforms-admin-addons").length&&(m("#wpforms-admin-addons-list").length&&(e=new List("wpforms-admin-addons-list",{valueNames:["addon-link"]}),m("#wpforms-admin-addons-search").on("keyup search",function(){l.updateAddonSearchResult(this,e)})),m(document).on("click","#wpforms-admin-addons .addon-item button",function(e){if(e.preventDefault(),m(this).hasClass("disabled"))return!1;l.addonToggle(m(this))}))},updateAddonSearchResult:function(e,t){var e=m(e).val(),n=m("#addons-heading");e?n.text(wpforms_admin.addon_search):n.text(n.data("text")),e=e.replace(/[.,]/g," "),t.search(e)},setAddonState:function(e,t,n,o){var t={activate:"wpforms_activate_addon",install:"wpforms_install_addon",deactivate:"wpforms_deactivate_addon"}[t];t&&(t={action:t,nonce:wpforms_admin.nonce,plugin:e,type:n},m.post(wpforms_admin.ajax_url,t,function(e){o(e)}).fail(function(e){console.log(e.responseText)}))},addonToggle:function(t){var n,o,i,s,r,a,c=t.closest(".addon-item"),e=t.attr("data-plugin"),d=t.attr("data-type");if(t.hasClass("status-go-to-url"))window.open(t.attr("data-plugin"),"_blank");else{if(t.prop("disabled",!0).addClass("loading"),t.html(p.iconSpinner),t.hasClass("status-active"))n="deactivate",o="status-installed","plugin"===d&&(o+=" button button-secondary"),i=wpforms_admin.addon_inactive,s=wpforms_admin.addon_activate,r=wpforms_admin.addon_deactivate,"addon"===d&&(s=p.iconActivate+s,r=p.iconDeactivate+r);else if(t.hasClass("status-installed"))n="activate",o="status-active","plugin"===d&&(o+=" button button-secondary disabled"),i=wpforms_admin.addon_active,s=wpforms_admin.addon_deactivate,"addon"===d?(s=p.iconDeactivate+s,r=p.iconActivate+wpforms_admin.addon_activate):"plugin"===d&&(s=wpforms_admin.addon_activated,r=wpforms_admin.addon_activate);else{if(!t.hasClass("status-missing"))return;n="install",o="status-active","plugin"===d&&(o+=" button disabled"),i=wpforms_admin.addon_active,s=wpforms_admin.addon_activated,r=p.iconInstall,"addon"===d&&(s=p.iconActivate+wpforms_admin.addon_deactivate,r+=wpforms_admin.addon_install)}l.setAddonState(e,n,d,function(e){e.success?("install"===n?(t.attr("data-plugin",e.data.basename),a=e.data.msg,e.data.is_activated||(i=wpforms_admin.addon_inactive,s="plugin"===d?wpforms_admin.addon_activate:p.iconActivate+wpforms_admin.addon_activate,o="plugin"===d?"status-installed button button-secondary":"status-installed")):a=e.data,c.find(".actions").append('<div class="msg success">'+a+"</div>"),c.find("span.status-label").removeClass("status-active status-installed status-missing").addClass(o).removeClass("button button-primary button-secondary disabled").text(i),t.removeClass("status-active status-installed status-missing").removeClass("button button-primary button-secondary disabled").addClass(o).html(s)):("object"==typeof e.data?"addon"===d?c.find(".actions").append('<div class="msg error"><p>'+wpforms_admin.addon_error+"</p></div>"):c.find(".actions").append('<div class="msg error"><p>'+wpforms_admin.plugin_error+"</p></div>"):c.find(".actions").append('<div class="msg error"><p>'+e.data+"</p></div>"),"install"===n&&"plugin"===d&&t.addClass("status-go-to-url").removeClass("status-missing"),t.html(r)),t.prop("disabled",!1).removeClass("loading"),c.find(".actions").find(".msg.error").length||setTimeout(function(){m(".addon-item .msg").remove()},3e3)})}},initSettings:function(){m(document).on("wpformsReady",function(){var e,t;m("#wpforms-settings").length&&(e=l.getQueryString("wpforms-integration"),t=l.getQueryString("jump"),e?m("body").animate({scrollTop:m("#wpforms-integration-"+e).offset().top},1e3):t&&m("body").animate({scrollTop:m("#"+t).offset().top},1e3),m(".wpforms-admin-settings-form").conditions([{conditions:{element:"#wpforms-setting-gdpr",type:"checked",operator:"is"},actions:{if:{element:"#wpforms-setting-row-gdpr-disable-uuid,#wpforms-setting-row-gdpr-disable-details",action:"show"},else:{element:"#wpforms-setting-row-gdpr-disable-uuid,#wpforms-setting-row-gdpr-disable-details",action:"hide"}},effect:"appear"},{conditions:{element:"input[name=captcha-provider]:checked",type:"value",operator:"=",condition:"hcaptcha"},actions:{if:[{element:".wpforms-setting-row",action:"show"},{element:".wpforms-setting-recaptcha, #wpforms-setting-row-captcha-provider .desc, #wpforms-setting-row-recaptcha-site-key, #wpforms-setting-row-recaptcha-secret-key, #wpforms-setting-row-recaptcha-fail-msg, .wpforms-setting-turnstile, #wpforms-setting-row-captcha-provider .desc, #wpforms-setting-row-turnstile-heading, #wpforms-setting-row-turnstile-site-key, #wpforms-setting-row-turnstile-secret-key, #wpforms-setting-row-turnstile-theme, #wpforms-setting-row-turnstile-fail-msg",action:"hide"}]},effect:"appear"},{conditions:{element:"input[name=captcha-provider]:checked",type:"value",operator:"=",condition:"recaptcha"},actions:{if:[{element:".wpforms-setting-row",action:"show"},{element:"#wpforms-setting-row-captcha-provider .desc, #wpforms-setting-row-hcaptcha-heading, #wpforms-setting-row-hcaptcha-site-key, #wpforms-setting-row-hcaptcha-secret-key, #wpforms-setting-row-hcaptcha-fail-msg, #wpforms-setting-row-captcha-provider .desc, #wpforms-setting-row-turnstile-heading, #wpforms-setting-row-turnstile-site-key, #wpforms-setting-row-turnstile-secret-key, #wpforms-setting-row-turnstile-theme, #wpforms-setting-row-turnstile-fail-msg",action:"hide"}]},effect:"appear"},{conditions:{element:"input[name=captcha-provider]:checked",type:"value",operator:"=",condition:"turnstile"},actions:{if:[{element:".wpforms-setting-row",action:"show"},{element:"#wpforms-setting-row-captcha-provider .desc, #wpforms-setting-row-hcaptcha-heading, #wpforms-setting-row-hcaptcha-site-key, #wpforms-setting-row-hcaptcha-secret-key, #wpforms-setting-row-hcaptcha-fail-msg, .wpforms-setting-recaptcha, #wpforms-setting-row-captcha-provider .desc, #wpforms-setting-row-recaptcha-site-key, #wpforms-setting-row-recaptcha-secret-key, #wpforms-setting-row-recaptcha-fail-msg",action:"hide"}]},effect:"appear"},{conditions:{element:"input[name=captcha-provider]:checked",type:"value",operator:"=",condition:"none"},actions:{if:[{element:".wpforms-setting-row",action:"hide"},{element:".wpforms-setting-captcha-heading, #wpforms-setting-row-captcha-provider, #wpforms-setting-row-captcha-provider .desc",action:"show"}]},effect:"appear"}]))}),m(document).on("change","#wpforms-setting-row-render-engine input",l.settingsRenderEngineChange),m(document).on("change","#wpforms-setting-disable-css",function(){l.settingsFormStylesAlert(m(this).val())}),m(document).on("click",".wpforms-setting-row-image button",function(e){e.preventDefault(),l.imageUploadModal(m(this))}),m(document).on("click","#wpforms-setting-license-key-verify",function(e){e.preventDefault(),l.licenseVerify(m(this))}),m(document).on("click",".wpforms-setting-license-wrapper",function(e){e.preventDefault();e=m("#wpforms-setting-license-key");e.length&&e.prop("disabled")&&l.licenseEditMessage()}),m(document).on("click","#wpforms-setting-license-key-deactivate",function(e){e.preventDefault(),l.licenseDeactivate(m(this))}),m(document).on("click","#wpforms-setting-license-key-refresh",function(e){e.preventDefault(),l.licenseRefresh(m(this))}),m(document).on("click",".wpforms-settings-provider-connect",function(e){e.preventDefault();e=m(this);l.integrationConnect(e)}),m(document).on("click",".wpforms-settings-provider-accounts-list .remove a",function(e){e.preventDefault(),l.integrationDisconnect(m(this))}),m(document).on("click",".wpforms-settings-provider:not(.focus-out) .wpforms-settings-provider-header",function(e){e.preventDefault();var t=m(this);t.parent().find(".wpforms-settings-provider-accounts").stop().slideToggle("",function(){t.parent().find(".wpforms-settings-provider-logo i").toggleClass("fa-chevron-right fa-chevron-down")})}),m(document).on("click",".wpforms-settings-provider-accounts-toggle a",function(e){e.preventDefault();e=m(this).parent().next(".wpforms-settings-provider-accounts-connect");e.find("input[type=text], input[type=password]").val(""),e.stop().slideToggle()}),m(document).on("change","#wpforms-setting-row-captcha-provider input",function(){var e=m("#wpforms-setting-row-captcha-preview");"hcaptcha"===this.value||"turnstile"===this.value?e.removeClass("wpforms-hidden"):"none"===this.value?e.addClass("wpforms-hidden"):m("#wpforms-setting-row-recaptcha-type input:checked").trigger("change"),e.find(".wpforms-captcha-preview").length&&(e.find(".wpforms-captcha-preview").empty(),e.find(".wpforms-captcha-placeholder").removeClass("wpforms-hidden"))}),m(document).on("change","#wpforms-setting-row-recaptcha-type input",function(){m("#wpforms-setting-row-captcha-preview").toggleClass("wpforms-hidden","v2"!==this.value),m("#wpforms-setting-row-recaptcha-v3-threshold").toggleClass("wpforms-hidden","v3"!==this.value)}),m(document).on("change",".wpforms-toggle-control input",function(){var e=m(this),t=e.is(":checked"),e=e.closest(".wpforms-setting-field"),n=e.find(".wpforms-toggle-desc.desc-on"),e=e.find(".wpforms-toggle-desc.desc-off"),o=0<n.length&&0<e.length;n.toggleClass("wpforms-hidden",!t&&o),e.toggleClass("wpforms-hidden",t&&o)})},settingsRenderEngineChange:function(e){m(this).val()},settingsFormStylesAlert:function(e){if("2"===e)var t=wpforms_admin.settings_form_style_base;else{if("3"!==e)return;t=wpforms_admin.settings_form_style_none}m.alert({title:wpforms_admin.heads_up,content:t,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})},imageUploadModal:function(e){var t;p.media_frame||(t=m(e).closest(".wpforms-setting-field"),p.media_frame=wp.media.frames.wpforms_media_frame=wp.media({className:"media-frame wpforms-media-frame",frame:"select",multiple:!1,title:wpforms_admin.upload_image_title,library:{type:"image"},button:{text:wpforms_admin.upload_image_button}}),p.media_frame.on("select",function(){var e=p.media_frame.state().get("selection").first().toJSON();t.find("input[type=text]").val(e.url),t.find("img").remove(),t.prepend('<img src="'+e.url+'">')})),p.media_frame.open()},licenseVerify:function(i){var s=i.closest(".wpforms-setting-row"),r=m("#wpforms-setting-license-key"),e=i.outerWidth(),a=i.text(),t={action:"wpforms_verify_license",nonce:wpforms_admin.nonce,license:r.val()};i.html(p.iconSpinner).css("width",e).prop("disabled",!0),m.post(wpforms_admin.ajax_url,t,function(e){var t,n="fa fa-check-circle",o="green";e.success?(t=e.data.msg,i.hide(),s.find("#wpforms-setting-license-key-info-message").empty().hide(),s.find(".type, .desc, #wpforms-setting-license-key-deactivate").show(),s.find(".type strong").text(e.data.type),m(".wpforms-license-notice").remove(),r.prop("disabled",!0).addClass("wpforms-setting-license-is-valid").attr("value",r.val())):(n="fa fa-exclamation-circle",o="orange",t=e.data,s.find(".type, .desc, #wpforms-setting-license-key-deactivate").hide(),r.prop("disabled",!1)),m.alert({title:!1,content:t,icon:n,type:o,buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}}),i.html(a).css("width","auto").prop("disabled",!1)}).fail(function(e){r.prop("disabled",!1),console.log(e.responseText)})},licenseEditMessage:function(){m.alert({title:wpforms_admin.heads_up,content:wpforms_admin.edit_license,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})},licenseDeactivate:function(e){const r=m(e),a=r.closest(".wpforms-setting-row");e=r.outerWidth();const c=r.text();var t={action:"wpforms_deactivate_license",nonce:wpforms_admin.nonce};r.html(p.iconSpinner).css("width",e).prop("disabled",!0),m.post(wpforms_admin.ajax_url,t,function(e){let t="fa fa-info-circle",n="blue",o=wpforms_admin.success;var i=e.data,s=i.msg&&"string"==typeof i.msg?i.msg:wpforms_admin.something_went_wrong;e.success?(a.find("#wpforms-setting-license-key").val("").attr("value","").prop({readonly:!1,disabled:!1}).removeClass(),a.find(".wpforms-license-key-deactivate-remove").remove(),a.find("#wpforms-setting-license-key-info-message").html(i.info).show(),a.find("#wpforms-setting-license-key-verify").prop("disabled",!1).show(),a.find(".type, .desc, #wpforms-setting-license-key-deactivate").hide()):(t="fa fa-exclamation-circle",n="orange",o=wpforms_admin.oops),m.alert({title:o,content:s,icon:t,type:n,buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}}),r.html(c).css("width","auto").prop("disabled",!1)}).fail(function(e){console.log(e.responseText)})},licenseRefresh:function(e){var i=m(e).closest(".wpforms-setting-row"),s=m("#wpforms-setting-license-key"),e={action:"wpforms_refresh_license",nonce:wpforms_admin.nonce,license:s.val()};m.post(wpforms_admin.ajax_url,e,function(e){var t,n="fa fa-check-circle",o="green";e.success?(t=e.data.msg,i.find(".type strong").text(e.data.type)):(n="fa fa-exclamation-circle",o="orange",t=e.data,i.find(".type, .desc").hide(),s.removeClass("wpforms-setting-license-is-valid").addClass("wpforms-setting-license-is-invalid")),m.alert({title:!1,content:t,icon:n,type:o,buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}).fail(function(e){console.log(e.responseText)})},integrationConnect:function(t){var e=t.outerWidth(),n=t.text(),o=t.closest(".wpforms-settings-provider"),i={action:"wpforms_settings_provider_add_"+t.data("provider"),data:t.closest("form").serialize(),provider:t.data("provider"),nonce:wpforms_admin.nonce},s=wpforms_admin.provider_auth_error;t.html(wpforms_admin.connecting).css("width",e).prop("disabled",!0),m.post(wpforms_admin.ajax_url,i,function(e){e.success?(o.find(".wpforms-settings-provider-accounts-list ul").append(e.data.html),o.addClass("connected"),t.closest(".wpforms-settings-provider-accounts-connect").stop().slideToggle()):(Object.prototype.hasOwnProperty.call(e,"data")&&Object.prototype.hasOwnProperty.call(e.data,"error_msg")&&(s+="<br>"+e.data.error_msg),l.integrationError(s))}).fail(function(){l.integrationError(s)}).always(function(){t.html(n).css("width","auto").prop("disabled",!1)})},integrationDisconnect:function(e){var n=m(e),o=n.parents(".wpforms-settings-provider"),t={action:"wpforms_settings_provider_disconnect_"+n.data("provider"),provider:n.data("provider"),key:n.data("key"),nonce:wpforms_admin.nonce},i=wpforms_admin.provider_delete_error;m.confirm({title:wpforms_admin.heads_up,content:wpforms_admin.provider_delete_confirm,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.post(wpforms_admin.ajax_url,t,function(e){var t;e.success?(n.parent().parent().remove(),void 0!==(t=o.find(".wpforms-settings-provider-accounts-list li").length)&&0!==t||o.removeClass("connected"),m(document).trigger("wpformsProviderRemoved",[o,e])):(Object.prototype.hasOwnProperty.call(e,"data")&&Object.prototype.hasOwnProperty.call(e.data,"error_msg")&&(i+="<br>"+e.data.error_msg),l.integrationError(i))}).fail(function(){l.integrationError(i)})}},cancel:{text:wpforms_admin.cancel,keys:["esc"]}}})},integrationError:function(e){m.alert({title:wpforms_admin.something_went_wrong,content:e,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})},initTools:function(){m(document).on("click","#wpforms-ssl-verify",function(e){e.preventDefault(),l.verifySSLConnection()}),m(document).on("click","#wpforms-importer-forms-submit",function(e){var t;e.preventDefault(),m("#wpforms-importer-forms input:checked").length?(t=[],m("#wpforms-importer-forms input:checked").each(function(e){t[e]=m(this).val()}),wpforms_admin.isPro?l.importForms(t):l.analyzeForms(t)):m.alert({title:wpforms_admin.heads_up,content:wpforms_admin.importer_forms_required,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}),m(document).on("click","#wpforms-importer-continue-submit",function(e){e.preventDefault(),l.importForms(p.formIDs)})},verifySSLConnection:function(){var t=m("#wpforms-ssl-verify"),n=t.text(),o=t.outerWidth(),i=t.parent(),e={action:"wpforms_verify_ssl",nonce:wpforms_admin.nonce};t.css("width",o).prop("disabled",!0).text(wpforms_admin.testing),m.post(wpforms_admin.ajax_url,e,function(e){console.log(e),i.find(".wpforms-alert, .wpforms-ssl-error").remove(),e.success&&t.before('<div class="wpforms-alert wpforms-alert-success">'+e.data.msg+"</div>"),!e.success&&e.data.msg&&t.before('<div class="wpforms-alert wpforms-alert-danger">'+e.data.msg+"</div>"),!e.success&&e.data.debug&&t.before('<div class="wpforms-ssl-error pre-error">'+e.data.debug+"</div>"),t.css("width",o).prop("disabled",!1).text(n)})},analyzeForms:function(e){var t=m("#wpforms-importer-analyze");t.find(".form-total").text(e.length),t.find(".form-current").text("1"),m("#wpforms-importer-forms").hide(),t.show(),p.analyzeQueue=e,p.analyzed=0,p.analyzeUpgrade=[],p.formIDs=e,l.analyzeForm()},analyzeForm:function(){var t=m("#wpforms-importer-analyze"),n=_.first(p.analyzeQueue),e={action:"wpforms_import_form_"+l.getQueryString("provider"),analyze:1,form_id:n,nonce:wpforms_admin.nonce};m.post(wpforms_admin.ajax_url,e,function(e){e.success&&(_.isEmpty(e.data.upgrade_plain)&&_.isEmpty(e.data.upgrade_omit)||p.analyzeUpgrade.push({name:e.data.name,fields:_.union(e.data.upgrade_omit,e.data.upgrade_plain)}),p.analyzeQueue=_.without(p.analyzeQueue,n),p.analyzed++,_.isEmpty(p.analyzeQueue)?_.isEmpty(p.analyzeUpgrade)?l.importForms(p.formIDs):(e=wp.template("wpforms-importer-upgrade"),t.find(".upgrade").append(e(p.analyzeUpgrade)),t.find(".upgrade").show(),t.find(".process-analyze").hide()):(t.find(".form-current").text(p.analyzed+1),l.analyzeForm()))})},importForms:function(e){var t=m("#wpforms-importer-process");t.find(".form-total").text(e.length),t.find(".form-current").text("1"),m("#wpforms-importer-forms, #wpforms-importer-analyze").hide(),t.show(),p.importQueue=e,p.imported=0,l.importForm()},importForm:function(){var n=m("#wpforms-importer-process"),o=_.first(p.importQueue),e={action:"wpforms_import_form_"+l.getQueryString("provider"),form_id:o,nonce:wpforms_admin.nonce};m.post(wpforms_admin.ajax_url,e,function(e){var t;e.success&&(t=e.data.error?wp.template("wpforms-importer-status-error"):wp.template("wpforms-importer-status-update"),n.find(".status").prepend(t(e.data)),n.find(".status").show(),p.importQueue=_.without(p.importQueue,o),p.imported++,_.isEmpty(p.importQueue)?(n.find(".process-count").hide(),n.find(".forms-completed").text(p.imported),n.find(".process-completed").show()):(n.find(".form-current").text(p.imported+1),l.importForm()))})},initUpgrades:function(){m(document).on("click","#wpforms-upgrade-143 button",function(e){e.preventDefault();var t=m(this),e=t.outerWidth(),n=m("#wpforms-upgrade-143 .status"),o={action:"wpforms_upgrade_143",nonce:wpforms_admin.nonce,init:!0,incomplete:t.data("incomplete")};t.html(p.iconSpinner).css("width",e).prop("disabled",!0),m.post(wpforms_admin.ajax_url,o,function(e){e.success&&(p.upgraded=Number(e.data.upgraded),p.upgradeTotal=Number(e.data.total),e=Math.round(Number(p.upgraded)/Number(p.upgradeTotal)*100),t.remove(),n.find(".bar").css("width",e+"%"),n.show().find(".total").text(p.upgradeTotal),n.find(".current").text(p.upgraded),n.find(".percent").text(e+"%"),l.upgrade143())})})},upgrade143:function(){var n=m("#wpforms-upgrade-143 .status"),e={action:"wpforms_upgrade_143",nonce:wpforms_admin.nonce,upgraded:p.upgraded};m.post(wpforms_admin.ajax_url,e,function(e){var t;e.success&&(p.upgraded=Number(p.upgraded)+Number(e.data.count),t=Math.round(Number(p.upgraded)/Number(p.upgradeTotal)*100),n.find(".bar").css("width",t+"%"),Number(e.data.count)<10?(n.find(".progress-bar").addClass("complete"),n.find(".msg").text(wpforms_admin.upgrade_completed)):(n.find(".current").text(p.upgraded),n.find(".percent").text(t+"%"),l.upgrade143()))})},initFlyoutMenu:function(){var e,t,n,r,a,c=m("#wpforms-flyout");0!==c.length&&(e=c.find(".wpforms-flyout-head"),t=e.find("img"),n={state:"inactive",srcInactive:t.attr("src"),srcActive:t.data("active")},e.on("click",function(e){e.preventDefault(),"active"===n.state?(c.removeClass("opened"),t.attr("src",n.srcInactive),n.state="inactive"):(c.addClass("opened"),t.attr("src",n.srcActive),n.state="active")}),0!==(r=m("#wpfooter")).length)&&(a=m("#wpforms-overview, #wpforms-entries-list, #wpforms-tools.wpforms-tools-tab-action-scheduler, #wpforms-tools.wpforms-tools-tab-logs"),m(window).on("resize scroll",_.debounce(function(e){var t=r.offset().top,n=t+r.height(),o=0<a.length?a.offset().top+a.height()+85:0,i=m(window).scrollTop(),s=i+m(window).height();n<=s&&i<=t&&s<o?c.addClass("out"):c.removeClass("out")},50)),m(window).trigger("scroll"))},initLity:function(){m(document).on("lity:ready",function(e,t){var n=t.element(),t=t.opener(),t=void 0!==t?t.data("lity-srcset"):"";void 0!==t&&""!==t&&n.find(".lity-content img").attr("srcset",t)})},isFormTypeNode:function(e){return"TEXTAREA"===(e=e||!1)||"INPUT"===e||"SELECT"===e},getQueryString:function(e){e=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},debug:function(e){l.isDebug()&&("object"==typeof e||e.constructor===Array?(console.log("WPForms Debug:"),console.log(e)):console.log("WPForms Debug: "+e))},isDebug:function(){return window.location.hash&&"#wpformsdebug"===window.location.hash}};l.init(),window.WPFormsAdmin=l}(jQuery);