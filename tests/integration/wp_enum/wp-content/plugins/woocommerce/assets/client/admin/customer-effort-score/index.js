(()=>{var e={31772:(e,o,t)=>{"use strict";var r=t(25148);function c(){}function n(){}n.resetWarningCache=c,e.exports=function(){function e(e,o,t,c,n,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function o(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:c};return t.PropTypes=t,t}},7862:(e,o,t)=>{e.exports=t(31772)()},25148:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},o={};function t(r){var c=o[r];if(void 0!==c)return c.exports;var n=o[r]={exports:{}};return e[r](n,n.exports,t),n.exports}t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";t.r(r),t.d(r,{ALLOW_TRACKING_OPTION_NAME:()=>y,CustomerEffortScore:()=>w,CustomerFeedbackModal:()=>d,CustomerFeedbackSimple:()=>_,FeedbackModal:()=>f,ProductMVPFeedbackModal:()=>h,QUEUE_OPTION_NAME:()=>K,STORE_KEY:()=>z,addCustomerEffortScoreExitPageListener:()=>T,addExitPage:()=>E,getExitPageData:()=>C,removeCustomerEffortScoreExitPageListener:()=>x,removeExitPage:()=>P,triggerExitPageCesSurvey:()=>N,useCustomerEffortScoreExitPageTracker:()=>O});var e={};t.r(e),t.d(e,{addCesSurvey:()=>I,addCesSurveyForAnalytics:()=>V,addCesSurveyForCustomerSearch:()=>j,hideCesModal:()=>W,hideProductMVPFeedbackModal:()=>U,setCesSurveyQueue:()=>B,showCesModal:()=>F,showProductMVPFeedbackModal:()=>Y});var o={};t.r(o),t.d(o,{getCesSurveyQueue:()=>G});var c={};t.r(c),t.d(c,{getCesSurveyQueue:()=>J,getVisibleCESModalData:()=>$,isProductMVPFeedbackModalVisible:()=>X});const n=window.wp.element;var i=t(7862),s=t.n(i);const a=window.wp.i18n,l=window.wp.data,u=window.wp.components,m=window.wc.experimental;function d(e){let{recordScoreCallback:o,title:t=(0,a.__)("Please share your feedback","woocommerce"),description:r,firstQuestion:c,secondQuestion:i,defaultScore:s=NaN,onCloseModal:l,customOptions:d,shouldShowComments:p=((e,o)=>[e,o].some((e=>1===e||2===e)))}=e;const w=d&&d.length>0?d:[{label:(0,a.__)("Strongly disagree","woocommerce"),value:"1"},{label:(0,a.__)("Disagree","woocommerce"),value:"2"},{label:(0,a.__)("Neutral","woocommerce"),value:"3"},{label:(0,a.__)("Agree","woocommerce"),value:"4"},{label:(0,a.__)("Strongly Agree","woocommerce"),value:"5"}],[_,f]=(0,n.useState)(s||NaN),[h,b]=(0,n.useState)(s||NaN),[g,y]=(0,n.useState)(""),[S,k]=(0,n.useState)(!1),[v,C]=(0,n.useState)(!0),E=()=>{C(!1),l&&l()},P=(e,o)=>{const t=parseInt(e,10);o(t),k(!Number.isInteger(t))};return v?(0,n.createElement)(u.Modal,{className:"woocommerce-customer-effort-score",title:t,onRequestClose:E,shouldCloseOnClickOutside:!1},(0,n.createElement)(m.Text,{variant:"body",as:"p",className:"woocommerce-customer-effort-score__intro",size:14,lineHeight:"20px",marginBottom:"1.5em"},r||(0,a.__)("Your feedback will help create a better experience for thousands of merchants like you. Please tell us to what extent you agree or disagree with the statements below.","woocommerce")),(0,n.createElement)(m.Text,{variant:"subtitle.small",as:"p",weight:"600",size:"14",lineHeight:"20px"},c),(0,n.createElement)("div",{className:"woocommerce-customer-effort-score__selection"},(0,n.createElement)(u.RadioControl,{selected:_.toString(10),options:w,onChange:e=>P(e,f)})),i&&(0,n.createElement)(m.Text,{variant:"subtitle.small",as:"p",weight:"600",size:"14",lineHeight:"20px"},i),i&&(0,n.createElement)("div",{className:"woocommerce-customer-effort-score__selection"},(0,n.createElement)(u.RadioControl,{selected:h.toString(10),options:w,onChange:e=>P(e,b)})),"function"==typeof p&&p(_,h)&&(0,n.createElement)("div",{className:"woocommerce-customer-effort-score__comments"},(0,n.createElement)(u.TextareaControl,{label:(0,a.__)("How is that screen useful to you? What features would you add or change?","woocommerce"),help:(0,a.__)("Your feedback will go to the WooCommerce development team","woocommerce"),value:g,placeholder:(0,a.__)("Optional, but much apprecated. We love reading your feedback!","woocommerce"),onChange:e=>y(e),rows:5})),S&&(0,n.createElement)("div",{className:"woocommerce-customer-effort-score__errors",role:"alert"},(0,n.createElement)(m.Text,{variant:"body",as:"p"},(0,a.__)("Please provide feedback by selecting an option above.","woocommerce"))),(0,n.createElement)("div",{className:"woocommerce-customer-effort-score__buttons"},(0,n.createElement)(u.Button,{isTertiary:!0,onClick:E,name:"cancel"},(0,a.__)("Cancel","woocommerce")),(0,n.createElement)(u.Button,{isPrimary:!0,onClick:()=>{!Number.isInteger(_)||i&&!Number.isInteger(h)?k(!0):(C(!1),o(_,h,g))},name:"send"},(0,a.__)("Share","woocommerce")))):null}d.propTypes={recordScoreCallback:s().func.isRequired,title:s().string,firstQuestion:s().string.isRequired,secondQuestion:s().string,defaultScore:s().number,onCloseModal:s().func};const p=()=>{},w=e=>{let{recordScoreCallback:o,title:t,description:r,noticeLabel:c,firstQuestion:i,secondQuestion:s,onNoticeShownCallback:u=p,onNoticeDismissedCallback:m=p,onModalShownCallback:w=p,onModalDismissedCallback:_=p,icon:f,shouldShowComments:h=((e,o)=>[e,o].some((e=>1===e||2===e)))}=e;const[b,g]=(0,n.useState)(!0),[y,S]=(0,n.useState)(!1),{createNotice:k}=(0,l.useDispatch)("core/notices2");return(0,n.useEffect)((()=>{b&&(k("success",c||t,{actions:[{label:(0,a.__)("Give feedback","woocommerce"),onClick:()=>{S(!0),w()}}],icon:f,explicitDismiss:!0,onDismiss:m}),g(!1),u())}),[b]),b?null:y?(0,n.createElement)(d,{title:t,description:r,firstQuestion:i,secondQuestion:s,recordScoreCallback:o,onCloseModal:_,shouldShowComments:h}):null};w.propTypes={recordScoreCallback:s().func.isRequired,title:s().string,onNoticeShownCallback:s().func,onNoticeDismissedCallback:s().func,onModalShownCallback:s().func,icon:s().element,firstQuestion:s().string.isRequired,secondQuestion:s().string,shouldShowComments:s().func};const _=e=>{let{onSelect:o,label:t}=e;const r=[{tooltip:(0,a.__)("Very difficult","woocommerce"),value:1,emoji:"ðŸ˜ž"},{tooltip:(0,a.__)("Difficult","woocommerce"),value:2,emoji:"ðŸ™"},{tooltip:(0,a.__)("Neutral","woocommerce"),value:3,emoji:"ðŸ˜‘"},{tooltip:(0,a.__)("Good","woocommerce"),value:4,emoji:"ðŸ™‚"},{tooltip:(0,a.__)("Very good","woocommerce"),value:5,emoji:"ðŸ˜"}];return(0,n.createElement)("div",{className:"customer-feedback-simple__container"},(0,n.createElement)(m.Text,{variant:"subtitle.small",as:"p",size:"13",lineHeight:"16px"},t),(0,n.createElement)("div",{className:"customer-feedback-simple__selection"},r.map((e=>(0,n.createElement)(u.Tooltip,{text:e.tooltip,key:e.value,position:"top center"},(0,n.createElement)(u.Button,{onClick:()=>{o(e.value)}},e.emoji))))))};function f(e){let{onSubmit:o,title:t,description:r,onModalClose:c,children:i,isSubmitButtonDisabled:s,submitButtonLabel:a,cancelButtonLabel:l}=e;const[d,p]=(0,n.useState)(!0),w=()=>{p(!1),c&&c()};return d?(0,n.createElement)(u.Modal,{className:"woocommerce-feedback-modal",title:t,onRequestClose:w,shouldCloseOnClickOutside:!1},(0,n.createElement)(m.Text,{variant:"body",as:"p",className:"woocommerce-feedback-modal__description",size:14,lineHeight:"20px",marginBottom:"1.5em"},r),i,(0,n.createElement)("div",{className:"woocommerce-feedback-modal__buttons"},(0,n.createElement)(u.Button,{isTertiary:!0,onClick:w,name:"cancel"},l),(0,n.createElement)(u.Button,{isPrimary:!s,isSecondary:s,onClick:()=>{o(),p(!1)},name:"send",disabled:s},a))):null}function h(e){let{recordScoreCallback:o,onCloseModal:t}=e;const[r,c]=(0,n.useState)(!1),[i,s]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!1),[p,w]=(0,n.useState)(!1),[_,h]=(0,n.useState)(!1),b=[{key:"missing-features",label:(0,a.__)("Missing features","woocommerce"),checked:r,onChange:c},{key:"missing-plugins",label:(0,a.__)("Missing plugins","woocommerce"),checked:i,onChange:s},{key:"difficult-to-use",label:(0,a.__)("It is difficult to use","woocommerce"),checked:l,onChange:d},{key:"slow-buggy-or-broken",label:(0,a.__)("It is slow, buggy, or broken","woocommerce"),checked:p,onChange:w},{key:"other",label:(0,a.__)("Other (describe below)","woocommerce"),checked:_,onChange:h}],[g,y]=(0,n.useState)(""),S=!(g||r||i||l||p||_);return(0,n.createElement)(f,{title:(0,a.__)("Thanks for trying out the new product editor!","woocommerce"),description:(0,a.__)("Weâ€™re working on making it better, and your feedback will help improve the experience for thousands of merchants like you.","woocommerce"),onSubmit:()=>{const e=b.filter((e=>e.checked)).map((e=>e.key));o(e,g)},onModalClose:t,isSubmitButtonDisabled:S,submitButtonLabel:(0,a.__)("Send feedback","woocommerce"),cancelButtonLabel:(0,a.__)("Skip","woocommerce")},(0,n.createElement)(n.Fragment,null,(0,n.createElement)(m.Text,{variant:"subtitle.small",as:"p",weight:"600",size:"14",lineHeight:"20px"},(0,a.__)("What made you switch back to the classic product editor?","woocommerce")),(0,n.createElement)(m.Text,{weight:"400",size:"12",as:"p",lineHeight:"16px",color:"#757575",className:"woocommerce-product-mvp-feedback-modal__subtitle"},(0,a.__)("(Check all that apply)","woocommerce")),(0,n.createElement)("div",{className:"woocommerce-product-mvp-feedback-modal__checkboxes"},b.map(((e,o)=>(0,n.createElement)(u.CheckboxControl,{key:o,label:e.label,name:e.key,checked:e.checked,onChange:e.onChange})))),(0,n.createElement)("div",{className:"woocommerce-product-mvp-feedback-modal__comments"},(0,n.createElement)(u.TextareaControl,{label:(0,a.__)("Additional comments","woocommerce"),value:g,placeholder:(0,a.__)("Optional, but much apprecated. We love reading your feedback!","woocommerce"),onChange:e=>y(e),rows:5}))))}_.propTypes={onSelect:s().func.isRequired,label:s().string.isRequired},f.propTypes={onSubmit:s().func.isRequired,title:s().string,description:s().string,onModalClose:s().func,isSubmitButtonDisabled:s().bool,submitButtonLabel:s().string,cancelButtonLabel:s().string},h.propTypes={recordScoreCallback:s().func.isRequired,onCloseModal:s().func};const b=window.wc.data,g=window.wc.navigation,y="woocommerce_allow_tracking",S="customer-effort-score-exit-page";let k=!1;const v=(0,l.resolveSelect)(b.OPTIONS_STORE_NAME).getOption(y).then((e=>{k="yes"===e})),C=()=>{if(!window.localStorage)return[];const e=window.localStorage.getItem(S),o=e?JSON.parse(e):[];return Array.isArray(o)?o:[]},E=async e=>{if(await v,!window.localStorage||!k)return;let o=C();o.find((o=>o===e))||o.push(e),o=o.slice(-10),window.localStorage.setItem(S,JSON.stringify(o))},P=e=>{if(!window.localStorage)return;let o=C();o=o.filter((o=>o!==e)),o=o.slice(-10),window.localStorage.setItem(S,JSON.stringify(o))},M={},T=(e,o)=>{M[e]=()=>{o()&&E(e)},window.addEventListener("unload",M[e])},x=e=>{M[e]&&window.removeEventListener("unload",M[e],{capture:!0})};function N(){var e;const o=C();if(null==o?void 0:o.length){if(!function(e){const o={import_products:()=>"product_importer"!==(0,g.getQuery)().page};return!o[e]||o[e]()}(o[0]))return;const t=function(e){switch(e){case"product_edit_view":case"editing_new_product":return{action:"editing_new_product"===e?"new_product":e,noticeLabel:(0,a.__)("How is your experience with editing products?","woocommerce"),title:(0,a.__)("How's your experience with editing products?","woocommerce"),description:(0,a.__)("We noticed you started editing a product, then left. How was it? Your feedback will help create a better experience for thousands of merchants like you.","woocommerce"),firstQuestion:(0,a.__)("The product editing screen is easy to use","woocommerce"),secondQuestion:(0,a.__)("The product editing screen's functionality meets my needs","woocommerce")};case"product_add_view":case"new_product":return{action:e,noticeLabel:(0,a.__)("How is your experience with creating products?","woocommerce"),title:(0,a.__)("How is your experience with creating products?","woocommerce"),description:(0,a.__)("We noticed you started creating a product, then left. How was it? Your feedback will help create a better experience for thousands of merchants like you.","woocommerce"),firstQuestion:(0,a.__)("The product creation screen is easy to use","woocommerce"),secondQuestion:(0,a.__)("The product creation screen's functionality meets my needs","woocommerce")};case"settings_change":return{action:e,icon:"âš™ï¸",noticeLabel:(0,a.__)("Did you find the right setting?","woocommerce"),title:(0,a.__)("Howâ€™s your experience with settings?","woocommerce"),description:(0,a.__)("We noticed you started changing store settings, then left. How was it? Your feedback will help create a better experience for thousands of merchants like you.","woocommerce"),firstQuestion:(0,a.__)("The settings screen is easy to use","woocommerce"),secondQuestion:(0,a.__)("The settings screen's functionality meets my needs","woocommerce")};case"shop_order_update":return{action:e,icon:"ðŸ“¦",noticeLabel:(0,a.__)("How easy or difficult was it to update this order?","woocommerce"),title:(0,a.__)("How's your experience with orders?","woocommerce"),description:(0,a.__)("We noticed you started editing an order, then left. How was it? Your feedback will help create a better experience for thousands of merchants like you.","woocommerce"),firstQuestion:(0,a.__)("The order editing screen is easy to use","woocommerce"),secondQuestion:(0,a.__)("The order details screen's functionality meets my needs","woocommerce")};case"import_products":return{action:e,icon:"ðŸ”„",noticeLabel:(0,a.__)("How is your experience with importing products?","woocommerce"),title:(0,a.__)("How's your experience with importing products?","woocommerce"),description:(0,a.__)("We noticed you started importing products, then left. How was it? Your feedback will help create a better experience for thousands of merchants like you.","woocommerce"),firstQuestion:(0,a.__)("The product import screen is easy to use","woocommerce"),secondQuestion:(0,a.__)("The product import screen's functionality meets my needs","woocommerce")};default:return null}}(o[0]);(null===(e=null==t?void 0:t.title)||void 0===e?void 0:e.length)&&(0,l.dispatch)("wc/customer-effort-score").addCesSurvey({...t,pageNow:window.pagenow,adminPage:window.adminpage,props:{ces_location:"outside"}}),P(o[0])}}const O=(e,o)=>{const t=(0,n.useRef)(o);(0,n.useEffect)((()=>{t.current=o}),[o]),(0,n.useEffect)((()=>()=>{t.current&&E(e)}),[]),(0,n.useEffect)((()=>(T(e,(()=>o)),()=>{x(e)})),[o])},Q=window.wp.dataControls,L="SET_CES_SURVEY_QUEUE",D="ADD_CES_SURVEY",H="SHOW_CES_MODAL",R="HIDE_CES_MODAL",q="SHOW_PRODUCT_MVP_FEEDBACK_MODAL",A="HIDE_PRODUCT_MVP_FEEDBACK_MODAL";function B(e){return{type:L,queue:e}}function I(e){let{action:o,title:t,description:r,noticeLabel:c,firstQuestion:n,secondQuestion:i,icon:s,pageNow:a=window.pagenow,adminPage:l=window.adminpage,onsubmitLabel:u,props:m={}}=e;return{type:D,action:o,title:t,description:r,noticeLabel:c,firstQuestion:n,secondQuestion:i,icon:s,pageNow:a,adminPage:l,onsubmit_label:u,props:m}}function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:H,surveyProps:e,onsubmit_label:e.onsubmitLabel||"",props:o,onSubmitNoticeProps:t}}function W(){return{type:R}}function V(){return I({action:"analytics_filtered",title:(0,a.__)("How easy was it to filter your store analytics?","woocommerce"),firstQuestion:(0,a.__)("The filters in the analytics screen are easy to use.","woocommerce"),secondQuestion:(0,a.__)("The filters' functionality meets my needs.","woocommerce"),pageNow:"woocommerce_page_wc-admin",adminPage:"woocommerce_page_wc-admin"})}function j(){return I({action:"ces_search",title:(0,a.__)("How easy was it to use search?","woocommerce"),firstQuestion:(0,a.__)("The search feature in WooCommerce is easy to use.","woocommerce"),secondQuestion:(0,a.__)("The search's functionality meets my needs.","woocommerce"),pageNow:"woocommerce_page_wc-admin",adminPage:"woocommerce_page_wc-admin",onsubmit_label:void 0,props:{search_area:"customer"}})}function Y(){return{type:q}}function U(){return{type:A}}const z="wc/customer-effort-score",K="woocommerce_ces_tracks_queue";function*G(){const e=yield(0,Q.apiFetch)({path:`/wc-admin/options?options=${K}`});if(!e)throw new Error;yield B(e[K]||[])}function J(e){return e.queue}function $(e){return e.showCESModal?e.cesModalData:void 0}function X(e){return e.showProductMVPFeedbackModal}const Z={queue:[],cesModalData:void 0,showCESModal:!1,showProductMVPFeedbackModal:!1};(0,l.registerStore)(z,{actions:e,selectors:c,resolvers:o,controls:Q.controls,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case L:return{...e,queue:[...e.queue,...o.queue]};case R:return{...e,showCESModal:!1,cesModalData:void 0};case H:const t={action:o.surveyProps.action,title:o.surveyProps.title,onSubmitLabel:o.onSubmitLabel,firstQuestion:o.surveyProps.firstQuestion,secondQuestion:o.surveyProps.secondQuestion,onSubmitNoticeProps:o.onSubmitNoticeProps||{},props:o.props};return{...e,showCESModal:!0,cesModalData:t};case D:if(e.queue.filter((e=>e.action===o.action)).length)return e;const r={action:o.action,title:o.title,description:o.description,noticeLabel:o.noticeLabel,firstQuestion:o.firstQuestion,secondQuestion:o.secondQuestion,icon:o.icon,pagenow:o.pageNow,adminpage:o.adminPage,onSubmitLabel:o.onSubmitLabel,props:o.props};return{...e,queue:[...e.queue,r]};case q:return{...e,showProductMVPFeedbackModal:!0};case A:return{...e,showProductMVPFeedbackModal:!1};default:return e}}})})(),(window.wc=window.wc||{}).customerEffortScore=r})();